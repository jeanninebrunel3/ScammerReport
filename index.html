// netlify/functions/search.js

exports.handler = async function(event, context) {
  if (event.httpMethod !== 'POST') {
    return {
      statusCode: 405,
      body: JSON.stringify({ message: 'Method Not Allowed' })
    };
  }

  try {
    const { name, phone, fb, rib } = JSON.parse(event.body);
    
    // Simulate a search in a database or list (replace with actual data handling logic)
    const results = [
      {
        name: 'John Doe',
        phone: '123-456-7890',
        fb: 'https://facebook.com/johndoe',
        rib: '123456789'
      },
      // Additional mock data goes here
    ];

    // Filter results based on the search criteria (you can add more filtering logic here)
    const filteredResults = results.filter(item => {
      return (item.name.includes(name) || item.phone.includes(phone) || item.fb.includes(fb) || item.rib.includes(rib));
    });

    return {
      statusCode: 200,
      body: JSON.stringify(filteredResults)
    };
  } catch (error) {
    console.error("Error processing search:", error);
    return {
      statusCode: 500,
      body: JSON.stringify({ message: 'Error processing search request' })
    };
  }
};
